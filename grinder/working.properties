# This is a set of demonstration scripts
#grinder.script=hello.clj
#grinder.script=hello_test.clj
#grinder.script=http.clj
#grinder.script=http_instrumented.clj
#grinder.script=http_stats.clj
#grinder.script=http_binding.clj
#grinder.script=http_shared.clj

grinder.script = meteor.clj

grinder.targetUrl = http://localhost:3000/

# If a resumeToken is supplied, the client will use it to login.
#
#   ex.  grinder.resumeToken = 5r5DoQNFNtwasCmHB
#
# You can obtain the token via:
#
#   a) database - Login once using a browser so the resume token
#                 is stored in the user's record.  The user's
#                 'services.resume.loginTokens' array contains
#                 the appropriate value in the latest entry's
#                 'token' field.
#      ex. 
#           db.users.find({"emails.address":"test@example.com"}, 
#                         {"services.resume.loginTokens":1})
#           => [{"token" : "5r5DoQNFNtwasCmHB",
#                 "when" : 1382630975632}]
# 
#   b) browser - Login once using a browser, then open your 
#                browser's developer tools (firebug, chrome
#                dev tools, etc), then refresh.
#                The Network tab will have a DDP call to the
#                'login' method with the resume token as a 
#                parameter.
#      ex.
#           ["{\"msg\":\"method\",\"method\":\"login\",
#              \"params\":[{\"resume\":\"5r5DoQNFNtwasCmHB\"}],
#              \"id\":\"1\"}"]
#
#grinder.resumeToken = 5r5DoQNFNtwasCmHB

# Subscriptions and calls expect a json array.  Array elements
# can be either:
#   * string - interpreted as name with no args
#   * object - keys interpreted as name, value must be an array
#              of arguments which will be passed to server
#
# These keywords will be replaced automatically:
#   CLIENTID - id unique to executing thread
#   RUNID - number corresponding to current test run
#
grinder.subscriptions = ["entry-count", {"latest-entries":[60]}]
grinder.calls = [{"addEntry":[{"ownerId":"CLIENTID","name":"load-RUNID","type":"client"}]}]

# Number of simulated clients = agents * processes * threads
# Each client will: 
#   1. Request initial payload
#   2. Request css & scripts found in initial response
#   3. Initiate DDP connection
#   4. Subscribe to subscriptions specified above
#   5. Perform method calls specified above 'runs' number of times
#
# See http://grinder.sourceforge.net/g3/properties.html
# for more options such as, initialSleepTime or processIncrement
#
grinder.processes = 1
grinder.threads = 1
grinder.runs = 1000


# Set debug to true to see collection updates from server
grinder.debug = false

# for some reason, the log directory required restating
grinder.logDirectory = log
